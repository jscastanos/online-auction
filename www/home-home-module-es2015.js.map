{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"{{user.statusColor}}\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-badge color=\\\"light\\\" *ngIf=\\\"user.status == 0\\\" [routerLink]=\\\"['/profile']\\\">\\n        Unverified</ion-badge>\\n      <ion-button fill=\\\"clear\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"notifications\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n\\n  <ion-toolbar color=\\\"{{user.statusColor}}\\\">\\n    <ion-searchbar placeholder=\\\"Search Items\\\" [(ngModel)]=\\\"searchQuery\\\" (ionChange)=\\\"search(searchQuery)\\\">\\n    </ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<div class=\\\"searchResult\\\" *ngIf=\\\"didUserSearch\\\">\\n  <ion-list>\\n    <div *ngIf=\\\"searchResults.length > 0; else noresult\\\">\\n      <ion-item *ngFor=\\\"let result of searchResults\\\" (click)=\\\"goToView(result)\\\">\\n        {{result.ProductName}}\\n      </ion-item>\\n    </div>\\n    <ng-template #noresult>\\n      <ion-item>\\n        No Result\\n      </ion-item>\\n    </ng-template>\\n  </ion-list>\\n</div>\\n\\n<ion-content>\\n  <ion-item *ngIf=\\\"user.status == 0\\\">\\n    <ion-text>\\n      Your account is unverified. Unverified account is limited to viewing only.\\n      <a routerLink=\\\"/profile\\\">Go to Details</a>\\n    </ion-text>\\n  </ion-item>\\n\\n  <ion-list lines=\\\"none\\\">\\n    <ion-list-header>\\n      <ion-label>browse by categories</ion-label>\\n    </ion-list-header>\\n    <app-slider [options]=\\\"categorySliderOpts\\\"></app-slider>\\n  </ion-list>\\n\\n  <ion-list lines=\\\"none\\\">\\n    <ion-list-header>\\n      <ion-label>browse by company</ion-label>\\n    </ion-list-header>\\n    <app-slider [options]=\\\"companySliderOpts\\\"></app-slider>\\n  </ion-list>\\n\\n  <ion-list lines=\\\"none\\\" class=\\\"itemList\\\">\\n    <ion-segment value=\\\"auction\\\" (ionChange)=\\\"segmentChanged($event)\\\" color=\\\"primary\\\">\\n      <ion-segment-button size-xs=\\\"6\\\" value=\\\"auction\\\" *ngIf=\\\"user.status != 0\\\">\\n        <ion-label>Auction</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button size-xs=\\\"6\\\" value=\\\"display\\\">\\n        <ion-label>On Display</ion-label>\\n      </ion-segment-button>\\n    </ion-segment>\\n\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size-xs=\\\"6\\\" *ngFor=\\\"let item of activeItems\\\" class=\\\"item\\\" (click)=\\\"goToView(item)\\\">\\n          <div class=\\\"badgeHolder\\\" *ngIf=\\\"item.DateTimeLimit != null\\\">\\n            <div class=\\\"bidBadge\\\">\\n              Until {{item.DateTimeLimit}}\\n            </div>\\n          </div>\\n          <img src=\\\"{{url}}/Product/RetrieveImage?id={{item.ProductId}}\\\"\\n            onerror=\\\"this.onerror = null; this.src = '../assets/placeholder.png'\\\" />\\n          <ion-text>\\n            <h5>{{item.ProductName}}</h5>\\n            <h2 *ngIf=\\\"item.rate != null\\\">\\n              <ion-label *ngFor=\\\"let rate of item.ratingStars\\\" style=\\\"display: inline; color: gold\\\">\\n                <ion-icon name=\\\"{{rate}}\\\"></ion-icon>\\n              </ion-label>\\n              <ion-label style=\\\"font-size: 15px; text-transform: lowercase;\\\">{{item.rate | number : '1.2-2'}} rating\\n              </ion-label>\\n            </h2>\\n            <h5 class=\\\"price\\\" *ngIf=\\\"item.CurrentBidPrice != null || item.AskPrice != null\\\">\\n              {{(item.CurrentBidPrice != null ? item.CurrentBidPrice : item.AskPrice) | currency : '&#8369; '}}\\n            </h5>\\n          </ion-text>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-list>\\n\\n  <ion-infinite-scroll threshold=\\\"10px\\\" (ionInfinite)=\\\"loadData()\\\">\\n    <ion-infinite-scroll-content style=\\\"padding-top: 10px;\\\" loadingSpinner=\\\"crescent\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\nimport { ComponentsModule } from '../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule { }\n","import { Component, ViewChild, OnDestroy } from '@angular/core';\nimport { ProductsService } from '../services/products.service';\nimport { IonInfiniteScroll, NavController } from '@ionic/angular';\nimport { AuthService } from '../services/auth.service';\nimport { CommonService } from '../services/common.service';\nimport { EnvService } from '../services/env.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage implements OnDestroy {\n  @ViewChild(IonInfiniteScroll, { static: false }) infiniteScroll: IonInfiniteScroll;\n\n  displayItems = [];\n  auctionItems = [];\n  activeItems = [];\n\n  lazyLoadIndex = {\n    auction: 0,\n    display: 0\n  };\n\n  searchResults = [];\n  didUserSearch = false;\n\n  currItemStatus = 1;\n\n  categorySliderOpts = {\n    sliderOpts: {\n      slidesPerView: 2,\n    },\n    style: 'box',\n    sliderBrowseAllText: 'See all categories',\n    slideRedirect: '/category-view',\n    sliderId: 1,\n    requestUrl: '/category?id=0&key=',\n    dataObject: {\n      id: 'CategoryId',\n      name: 'CategoryName'\n    }\n  }\n\n  companySliderOpts = {\n    sliderOpts: {\n      slidesPerView: 3,\n    },\n    style: 'circle',\n    sliderBrowseAllText: 'See all companies',\n    slideRedirect: '/company-view',\n    sliderId: 2,\n    requestUrl: '/branch',\n    dataObject: {\n      id: 'BranchId',\n      name: 'BranchName'\n    }\n  }\n\n  //api\n  fetchDisplayService;\n  fetchAuctionService;\n  searchProduct;\n\n  //common\n  user;\n  url;\n\n\n  constructor(private nav: NavController, private env: EnvService, private productsService: ProductsService, private auth: AuthService, public common: CommonService) {\n    this.user = this.common.user;\n    this.url = this.env.URL;\n  }\n\n  search(q) {\n\n    this.searchResults = []\n\n    if (q != \"\") {\n      this.searchProduct = this.productsService.getSearchProduct(q).subscribe(data => {\n        this.didUserSearch = true;\n        if (Object.keys(data).length > 0) {\n          for (let d in data) {\n            this.searchResults.push(data[d])\n          }\n        }\n      })\n    } else {\n      this.didUserSearch = false;\n    }\n  }\n\n  ngOnInit() {\n    this.fetchDisplay();\n\n    if (this.user.status != 0)\n      this.fetchAuction();\n\n  }\n\n  loadData() {\n\n    if (this.user.status == 0)\n      this.fetchDisplay();\n    else {\n\n      if (this.currItemStatus == 0)\n        this.fetchDisplay();\n      else\n        this.fetchAuction();\n\n    }\n\n    this.infiniteScroll.complete();\n\n  }\n\n  async fetchDisplay() {\n    this.fetchDisplayService = await this.productsService.getDisplayItems(this.lazyLoadIndex.display)\n      .subscribe(data => {\n        for (let index in data) {\n\n          //rating stars\n          data[index][\"ratingStars\"] = this.computeRating(data[index][\"rate\"]);\n          data[index][\"Status\"] = 0;\n          this.displayItems.push(data[index]);\n          this.lazyLoadIndex.display = data[index][\"recNo\"];\n        }\n        this.activeItems = this.displayItems\n      });\n  };\n\n  async fetchAuction() {\n    this.fetchAuctionService = await this.productsService.getAuctionItems(this.lazyLoadIndex.auction)\n      .subscribe(data => {\n        for (let index in data) {\n          data[index][\"DateTimeLimit\"] = data[index][\"DateTimeLimit\"].split(\"T\")[0];\n          data[index][\"Status\"] = 1;\n          this.auctionItems.push(data[index]);\n          this.lazyLoadIndex.auction = data[index][\"recNo\"];\n\n        }\n        this.activeItems = this.auctionItems\n\n      });\n  };\n\n  segmentChanged(e) {\n    if (e.detail.value == 'display') {\n      this.activeItems = this.displayItems;\n      this.currItemStatus = 0;\n\n    }\n    else {\n      this.activeItems = this.auctionItems;\n      this.currItemStatus = 1;\n    }\n  }\n\n\n  computeRating(rate) {\n    let whole, half, none, array = [];\n\n    whole = Math.trunc(rate);\n    half = Math.ceil(rate - whole);\n    none = Math.trunc(5 - (whole + half));\n\n    //construct data\n    for (const index of [].constructor(whole))\n      array.push(\"star\")\n\n    for (const index of [].constructor(half))\n      array.push(\"star-half\")\n\n    for (const index of [].constructor(none))\n      array.push(\"star-outline\")\n\n    return array;\n  }\n\n  goToView(item) {\n\n    let data = {\n      name: item.ProductName,\n      id: item.ProductId,\n      status: item.Status\n    }\n\n    let params = {\n      queryParams: {\n        q: JSON.stringify(data)\n      }\n    }\n    this.nav.navigateRoot([\"/item-view\"], params);\n  }\n\n\n  ngOnDestroy() {\n    this.displayItems = [];\n    this.auctionItems = [];\n    this.activeItems = [];\n    this.fetchDisplayService.unsubscribe();\n\n    if (this.fetchAuctionService != null)\n      this.fetchAuctionService.unsubscribe();\n\n    if (this.searchProduct != null)\n      this.searchProduct.unsubscribe();\n  }\n\n}\n"],"sourceRoot":""}