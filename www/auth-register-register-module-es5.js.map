{"version":3,"sources":["./src/app/auth/register/register.page.html","./src/app/auth/register/register-routing.module.ts","./src/app/auth/register/register.module.ts","./src/app/auth/register/register.page.ts"],"names":[],"mappings":"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","file":"auth-register-register-module-es5.js","sourcesContent":["module.exports = \"<ion-content>\\n  <div class=\\\"overlay\\\">\\n    <form [formGroup]=\\\"registerForm\\\" (ngSubmit)=\\\"register(registerForm)\\\">\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size-xs=\\\"12\\\">\\n            <ion-text>\\n              <h1>AUCTION</h1>\\n            </ion-text>\\n          </ion-col>\\n          <ion-col>\\n            <ion-text size-xs=\\\"12\\\">\\n              <h5>Create an account</h5>\\n            </ion-text>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size-xs=\\\"12\\\" class=\\\"ion-align-self-center\\\">\\n            <div class=\\\"ion-padding\\\">\\n              <ion-item class=\\\"ion-margin-top\\\">\\n                <ion-icon name=\\\"person\\\"></ion-icon>\\n                <ion-input type=\\\"text\\\" required formControlName=\\\"username\\\" placeholder=\\\"Username\\\"\\n                  (keyup)=\\\"updateValidation('username')\\\"></ion-input>\\n              </ion-item>\\n              <ion-label color=\\\"danger\\\" *ngIf=\\\"validations.username_available\\\">\\n                * Username Not Available\\n              </ion-label>\\n              <br />\\n              <ion-label color=\\\"danger\\\" *ngIf=\\\"validations.username\\\">\\n                * Please Provide Username\\n              </ion-label>\\n\\n\\n              <ion-item class=\\\"ion-margin-top\\\">\\n                <ion-icon name=\\\"key\\\"></ion-icon>\\n                <ion-input type=\\\"password\\\" required formControlName=\\\"password\\\" placeholder=\\\"Password\\\"\\n                  (keyup)=\\\"updateValidation('password')\\\"></ion-input>\\n              </ion-item>\\n              <ion-label color=\\\"danger\\\" *ngIf=\\\"validations.password\\\">\\n                * Please Provide Password\\n              </ion-label>\\n              <ion-item class=\\\"ion-margin-top\\\">\\n                <ion-icon name=\\\"key\\\"></ion-icon>\\n                <ion-input type=\\\"password\\\" required formControlName=\\\"confirm_password\\\" placeholder=\\\"Confirm Password\\\"\\n                  (keyup)=\\\"updateValidation('confirm_password')\\\">\\n                </ion-input>\\n              </ion-item>\\n              <ion-label color=\\\"danger\\\" *ngIf=\\\"validations.confirm_password\\\">\\n                * Please Re-Type Password\\n              </ion-label>\\n              <ion-label color=\\\"danger\\\"\\n                *ngIf=\\\"!registerForm.get('confirm_password').errors && registerForm.hasError('passwordNotMatch')\\\">\\n                * Password and Confirm Password don't match\\n              </ion-label>\\n\\n              <ion-item class=\\\"ion-margin-top\\\">\\n                <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                <ion-datetime displayFormat=\\\"D MMM YYYY\\\" formControlName=\\\"DOB\\\" placeholder=\\\"Date Of Birth\\\"\\n                  (ionChange)=\\\"updateValidation('DOB')\\\">\\n                </ion-datetime>\\n              </ion-item>\\n              <ion-label color=\\\"danger\\\" *ngIf=\\\"validations.DOB\\\">\\n                * You must provide your date of birth\\n              </ion-label>\\n\\n              <ion-label color=\\\"danger\\\" *ngIf=\\\"validations.underAge\\\">\\n                * You are a minor. You can't join this app.\\n              </ion-label>\\n\\n              <div style=\\\"margin-top: 50px;\\\">\\n                <ion-label>\\n                  <ion-checkbox formControlName=\\\"readTAC\\\" (ionChange)=\\\"updateValidation('readTAC')\\\"></ion-checkbox> I\\n                  have read the terms and conditions\\n                </ion-label>\\n                <br />\\n                <ion-label *ngIf=\\\"!validations.readTAC\\\" color=\\\"danger\\\">\\n                  * You need to agree with our terms and conditions\\n                </ion-label>\\n              </div>\\n\\n            </div>\\n\\n            <div class=\\\"ion-padding\\\">\\n              <ion-button color=\\\"primary\\\" shape=\\\"round\\\" size=\\\"md\\\" type=\\\"submit\\\" expand=\\\"full\\\">REGISTER</ion-button>\\n            </div>\\n          </ion-col>\\n          <ion-col>\\n            <ion-text>\\n              <h5>Already have an account.\\n                <a [routerLink]=\\\"['../login']\\\">Log In</a> </h5>\\n            </ion-text>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </form>\\n  </div>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RegisterPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, FormControl, Validators } from '@angular/forms';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { User } from 'src/app/models/user';\nimport { ToastController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { JsonPipe } from '@angular/common';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['../auth.scss'],\n})\nexport class RegisterPage implements OnInit {\n  registerForm;\n\n  validations = {\n    username: false,\n    username_available: false,\n    password: false,\n    confirm_password: false,\n    DOB: false,\n    readTAC: false,\n    underAge: false\n  }\n\n\n  userData: User;\n\n  constructor(public formBuilder: FormBuilder, private profileService: ProfileService, private authService: AuthService, public toast: ToastController, public router: Router) {\n    this.createForm();\n  }\n\n  ngOnInit() {\n  }\n\n  async initToast(message, duration) {\n    const initToast = await this.toast.create({\n      message: message,\n      duration: duration\n    });\n\n    initToast.present();\n  }\n\n  private createForm() {\n    this.registerForm = this.formBuilder.group({\n      'username': new FormControl('', Validators.required),\n      'password': new FormControl('', Validators.required),\n      'confirm_password': new FormControl('', Validators.required),\n      'DOB': new FormControl('', Validators.required),\n      'readTAC': new FormControl(false),\n      'underAge': new FormControl(false)\n    },\n      {\n        validators: [\n          this.checkpassword.bind(this),\n          this.checkUsernameAvailability.bind(this)]\n      })\n  }\n\n\n  checkpassword(formGroup: FormGroup) {\n    const { value: password } = formGroup.get('password');\n    const { value: confirm_password } = formGroup.get('confirm_password');\n\n    return password === confirm_password ? null : { passwordNotMatch: true }\n  }\n\n  checkUsernameAvailability(formGroup: FormGroup) {\n\n    const { value: username } = formGroup.get('username');\n\n    if (username != null && username != \"\") {\n\n      this.profileService.checkUsernameAvailability(username)\n        .subscribe(data => {\n          this.validations.username_available = !<boolean>data;\n        });\n\n      return this.validations.username_available ? null : { usernameNotAvailable: true };\n\n    }\n    else {\n      return null;\n    }\n  }\n\n  defaultValues(validations) {\n    for (let key in validations) {\n      this.validations[key] = false\n    }\n  }\n\n  updateValidation(e) {\n    if (e == \"readTAC\") {\n      this.validations[e] = this.registerForm.value[e];\n      return;\n    }\n\n    if (e == \"DOB\") {\n      var age = this.getAge(this.registerForm.value[e])\n\n      if (age >= 18)\n        this.validations[\"underAge\"] = false;\n      else\n        this.validations[\"underAge\"] = true;\n      return;\n    }\n\n    this.validations[e] = this.registerForm.value[e].length > 0 ? false : true;\n  }\n\n  register(form) {\n\n    //check validations \n    this.validations.username = !form.value.username ? true : false;\n    this.validations.password = !form.value.password ? true : false;\n    this.validations.confirm_password = !form.value.confirm_password ? true : false;\n    this.validations.DOB = !form.value.DOB ? true : false;\n    this.validations.readTAC = form.value.readTAC;\n\n    if (form.value.username != \"\" &&\n      form.value.password != \"\" &&\n      form.value.confirm_password != \"\" &&\n      form.value.DOB != \"\" &&\n      form.value.readTAC &&\n      this.validations.underAge == false) {\n\n      this.userData = {\n        username: form.value.username,\n        password: form.value.password,\n        Bdate: form.value.DOB\n      }\n\n      this.authService.register(this.userData).subscribe(data => {\n        let params = {\n          queryParams: {\n            id: JSON.stringify(data)\n          }\n        }\n\n        this.defaultValues(this.validations);\n        this.router.navigate([\"/getting-started\"], params);\n      },\n        response => {\n          this.initToast(\"Error in saving. Please try again\", 2000);\n        })\n\n    } else {\n\n      this.initToast(\"Please provide your information above\", 2000);\n    }\n\n\n\n  }\n\n\n  getAge(dob) {\n    return Math.floor((new Date().getTime() - new Date(dob).getTime()) / 3.15576e+10)\n\n  }\n\n\n}\n"],"sourceRoot":""}