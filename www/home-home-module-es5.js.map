{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"{{user.statusColor}}\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-badge color=\\\"light\\\" *ngIf=\\\"user.status == 0\\\" [routerLink]=\\\"['/profile']\\\">\\n        Unverified</ion-badge>\\n\\n      <ion-button id=\\\"notification-button\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/notification']\\\">\\n        <ion-badge color=\\\"danger\\\" *ngIf=\\\"notifCount != null || notifCount != 0\\\">{{notifCount}}</ion-badge>\\n        <ion-icon name=\\\"notifications\\\"></ion-icon>\\n      </ion-button>\\n\\n    </ion-buttons>\\n  </ion-toolbar>\\n\\n  <ion-toolbar color=\\\"{{user.statusColor}}\\\">\\n    <ion-searchbar placeholder=\\\"Search Items\\\" [(ngModel)]=\\\"searchQuery\\\" (ionChange)=\\\"search(searchQuery)\\\">\\n    </ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<div class=\\\"searchResult\\\" *ngIf=\\\"didUserSearch\\\">\\n  <ion-list>\\n    <div *ngIf=\\\"searchResults.length > 0; else noresult\\\">\\n      <ion-item *ngFor=\\\"let result of searchResults\\\" (click)=\\\"goToView(result)\\\">\\n        {{result.ProductName}}\\n      </ion-item>\\n    </div>\\n    <ng-template #noresult>\\n      <ion-item>\\n        No Result\\n      </ion-item>\\n    </ng-template>\\n  </ion-list>\\n</div>\\n\\n<ion-content>\\n  <ion-item *ngIf=\\\"user.status == 0\\\">\\n    <ion-text>\\n      Your account is unverified. Unverified account is limited to viewing only.\\n      <a routerLink=\\\"/profile\\\">Go to Details</a>\\n    </ion-text>\\n  </ion-item>\\n\\n  <ion-list lines=\\\"none\\\">\\n    <ion-list-header>\\n      <ion-label>browse by categories</ion-label>\\n    </ion-list-header>\\n    <app-slider [options]=\\\"categorySliderOpts\\\"></app-slider>\\n  </ion-list>\\n\\n  <ion-list lines=\\\"none\\\">\\n    <ion-list-header>\\n      <ion-label>browse by company</ion-label>\\n    </ion-list-header>\\n    <app-slider [options]=\\\"companySliderOpts\\\"></app-slider>\\n  </ion-list>\\n\\n  <ion-list lines=\\\"none\\\" class=\\\"itemList\\\">\\n    <ion-segment value=\\\"auction\\\" (ionChange)=\\\"segmentChanged($event)\\\" color=\\\"primary\\\">\\n      <ion-segment-button size-xs=\\\"6\\\" value=\\\"auction\\\" *ngIf=\\\"user.status != 0\\\">\\n        <ion-label>Auction</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button size-xs=\\\"6\\\" value=\\\"display\\\">\\n        <ion-label>On Display</ion-label>\\n      </ion-segment-button>\\n    </ion-segment>\\n\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size-xs=\\\"6\\\" *ngFor=\\\"let item of activeItems\\\" class=\\\"item\\\" (click)=\\\"goToView(item)\\\">\\n          <div class=\\\"badgeHolder\\\" *ngIf=\\\"item.DateTimeLimit != null\\\">\\n            <div class=\\\"bidBadge\\\">\\n              Until {{item.DateTimeLimit}}\\n            </div>\\n          </div>\\n          <img src=\\\"{{url}}/Product/RetrieveImage?id={{item.ProductId}}\\\"\\n            onerror=\\\"this.onerror = null; this.src = '../assets/placeholder.png'\\\" />\\n          <ion-text>\\n            <h5>{{item.ProductName}}</h5>\\n            <h2 *ngIf=\\\"item.rate != null\\\">\\n              <ion-label *ngFor=\\\"let rate of item.ratingStars\\\" style=\\\"display: inline; color: gold\\\">\\n                <ion-icon name=\\\"{{rate}}\\\"></ion-icon>\\n              </ion-label>\\n              <ion-label style=\\\"font-size: 15px; text-transform: lowercase;\\\">{{item.rate | number : '1.2-2'}} rating\\n              </ion-label>\\n            </h2>\\n            <h5 class=\\\"price\\\" *ngIf=\\\"item.CurrentBidPrice != null || item.AskPrice != null\\\">\\n              {{(item.CurrentBidPrice != null ? item.CurrentBidPrice : item.AskPrice) | currency : '&#8369; '}}\\n            </h5>\\n          </ion-text>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-list>\\n\\n  <ion-infinite-scroll threshold=\\\"10px\\\" (ionInfinite)=\\\"loadData()\\\">\\n    <ion-infinite-scroll-content style=\\\"padding-top: 10px;\\\" loadingSpinner=\\\"crescent\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\nimport { ComponentsModule } from '../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule { }\n","import { Component, ViewChild, OnDestroy } from '@angular/core';\nimport { ProductsService } from '../services/products.service';\nimport { IonInfiniteScroll, NavController } from '@ionic/angular';\nimport { AuthService } from '../services/auth.service';\nimport { CommonService } from '../services/common.service';\nimport { EnvService } from '../services/env.service';\nimport {\n  Plugins,\n  PushNotification,\n  PushNotificationToken,\n  PushNotificationActionPerformed\n} from '@capacitor/core';\nimport { ProfileService } from '../services/profile.service';\n\nconst { PushNotifications, Modals } = Plugins;\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage implements OnDestroy {\n  @ViewChild(IonInfiniteScroll, { static: false }) infiniteScroll: IonInfiniteScroll;\n\n  displayItems = [];\n  auctionItems = [];\n  activeItems = [];\n\n  lazyLoadIndex = {\n    auction: 0,\n    display: 0\n  };\n\n  searchResults = [];\n  didUserSearch = false;\n\n  currItemStatus = 1;\n\n  notifCount;\n\n  categorySliderOpts = {\n    sliderOpts: {\n      slidesPerView: 2,\n    },\n    style: 'box',\n    sliderBrowseAllText: 'See all categories',\n    slideRedirect: '/category-view',\n    sliderId: 1,\n    requestUrl: '/category?id=0&key=',\n    dataObject: {\n      id: 'CategoryId',\n      name: 'CategoryName'\n    }\n  }\n\n  companySliderOpts = {\n    sliderOpts: {\n      slidesPerView: 3,\n    },\n    style: 'circle',\n    sliderBrowseAllText: 'See all companies',\n    slideRedirect: '/company-view',\n    sliderId: 2,\n    requestUrl: '/branch',\n    dataObject: {\n      id: 'BranchId',\n      name: 'BranchName'\n    }\n  }\n\n  //api\n  fetchDisplayService;\n  fetchAuctionService;\n  searchProduct;\n  fetchNotif;\n\n  //common\n  user;\n  url;\n\n\n  constructor(private profileService: ProfileService, private nav: NavController, private env: EnvService, private productsService: ProductsService, private auth: AuthService, public common: CommonService) {\n    this.user = this.common.user;\n    this.url = this.env.URL;\n    this.setToDefault();\n  }\n\n  search(q) {\n\n    this.searchResults = []\n\n    if (q != \"\") {\n      this.searchProduct = this.productsService.getSearchProduct(q).subscribe(data => {\n        this.didUserSearch = true;\n        if (Object.keys(data).length > 0) {\n          for (let d in data) {\n            this.searchResults.push(data[d])\n          }\n        }\n      })\n    } else {\n      this.didUserSearch = false;\n    }\n  }\n\n  ngOnInit() {\n\n    this.fetchDisplay();\n    this.fetchNotifCount();\n\n    if (this.user.status != 0)\n      this.fetchAuction();\n\n\n    PushNotifications.register();\n\n    PushNotifications.addListener('registration',\n      (token: PushNotificationToken) => {\n        console.log('Push registration success, token: ' + token.value);\n\n        //check token\n        this.profileService.checkTokenValidity(this.user.id, token.value).subscribe(result => {\n          if (!result) {\n            //register token\n            this.profileService.registerFCMToken(this.user.id, token.value).subscribe()\n          }\n        });\n      }\n    );\n\n    PushNotifications.addListener('registrationError',\n      (error: any) => {\n        alert('Error on registration: ' + JSON.stringify(error));\n      }\n    );\n\n    PushNotifications.addListener('pushNotificationReceived',\n      (notification: PushNotification) => {\n        var audio = new Audio(\"assets/audio.mp3\");\n        audio.play();\n        let pn = Modals.alert({\n          title: notification.title,\n          message: notification.body\n        })\n      }\n    );\n\n    PushNotifications.addListener('pushNotificationActionPerformed',\n      (notification: PushNotificationActionPerformed) => {\n        this.nav.navigateRoot(\"/notification\")\n      }\n    );\n  }\n\n  loadData() {\n\n    if (this.user.status == 0)\n      this.fetchDisplay();\n    else {\n\n      if (this.currItemStatus == 0)\n        this.fetchDisplay();\n      else\n        this.fetchAuction();\n\n    }\n\n    this.infiniteScroll.complete();\n\n  }\n\n  fetchNotifCount() {\n    this.fetchNotif = this.profileService.notifs(this.user.id).subscribe(data => {\n      this.notifCount = Object.keys(data).length\n\n    })\n  }\n\n  async fetchDisplay() {\n    this.fetchDisplayService = await this.productsService.getDisplayItems(this.lazyLoadIndex.display)\n      .subscribe(data => {\n        for (let index in data) {\n\n          //rating stars\n          data[index][\"ratingStars\"] = this.computeRating(data[index][\"rate\"]);\n          data[index][\"Status\"] = 0;\n          this.displayItems.push(data[index]);\n          this.lazyLoadIndex.display = data[index][\"recNo\"];\n        }\n        this.activeItems = this.displayItems\n      });\n  };\n\n  async fetchAuction() {\n    this.fetchAuctionService = await this.productsService.getAuctionItems(this.lazyLoadIndex.auction)\n      .subscribe(data => {\n        for (let index in data) {\n          data[index][\"DateTimeLimit\"] = data[index][\"DateTimeLimit\"].split(\"T\")[0];\n          data[index][\"Status\"] = 1;\n          this.auctionItems.push(data[index]);\n          this.lazyLoadIndex.auction = data[index][\"recNo\"];\n\n        }\n        this.activeItems = this.auctionItems\n\n      });\n  };\n\n  segmentChanged(e) {\n    if (e.detail.value == 'display') {\n      this.activeItems = this.displayItems;\n      this.currItemStatus = 0;\n\n    }\n    else {\n      this.activeItems = this.auctionItems;\n      this.currItemStatus = 1;\n    }\n  }\n\n\n  computeRating(rate) {\n    let whole, half, none, array = [];\n\n    whole = Math.trunc(rate);\n    half = Math.ceil(rate - whole);\n    none = Math.trunc(5 - (whole + half));\n\n    //construct data\n    for (const index of [].constructor(whole))\n      array.push(\"star\")\n\n    for (const index of [].constructor(half))\n      array.push(\"star-half\")\n\n    for (const index of [].constructor(none))\n      array.push(\"star-outline\")\n\n    return array;\n  }\n\n  goToView(item) {\n\n    let data = {\n      name: item.ProductName,\n      id: item.ProductId,\n      status: item.Status\n    }\n\n    let params = {\n      queryParams: {\n        q: JSON.stringify(data)\n      }\n    }\n    this.nav.navigateRoot([\"/item-view\"], params);\n  }\n\n\n  setToDefault() {\n\n    this.displayItems = [];\n    this.auctionItems = [];\n    this.activeItems = [];\n  }\n\n  ngOnDestroy() {\n    this.setToDefault();\n    this.fetchDisplayService.unsubscribe();\n\n    if (this.fetchAuctionService != null)\n      this.fetchAuctionService.unsubscribe();\n\n    if (this.searchProduct != null)\n      this.searchProduct.unsubscribe();\n  }\n\n}\n"],"sourceRoot":""}